# 完了タスク (2024)

## 基盤・アーキテクチャ

- sol multi-runtime support (Node.js, Cloudflare Workers, Deno, Bun)
  - ServerRuntime enum, sol.config.json の runtime フィールド, wrangler で動作確認済み
- src/core/markdown を mizchi/markdown に移行
  - 外部パッケージ化、5077行削除、FootnoteDefinition/Reference 対応
- 再 export するのに、moonbitlang/parser を使用する
- js/cli を src/eclipse/cli で、CLIをMoonbitで書き直す
- virtual package を導入してクロスプラットフォーム化の基盤を作る
  - mizchi/luna から mizchi/luna のコアAPIを再 export

## Sol フレームワーク

- キャッチオールルート (`[...slug]`, `[[...slug]]`)
- ミドルウェア (ROP、Logger、CORS、`.then()` 合成)
- レイアウト完成 (ネストレイアウト対応)
- Error Boundary (コンポーネント単位エラー処理)
- Server Actions (フォーム送信のサーバー直接処理)
- Sol ServerComponent PageProps
  - Server Route から Client を Route に登録するとき、 Props を取らないといけない
  - Server Component 同士は呼び出せる
  - `__gen__/types` には Client/Server 共に使える Opaque Type を定義
- sol generate で `.sol/client/exports.mbt` を削除して直接 moon.pkg.json の link を更新
- hot reload (基本実装) - ページ全体リロード、client_auto_exports: false で高速化
- _dyn のDSL設計

## Astra SSG

- src/astra: 静的サイト生成 (src/sol/ssg から再設計)
  - astra build/dev, Shiki syntax highlighting, dark/light toggle, file ordering
- AI 用 llm.txt の生成
- sitemap.xml
- RSS
- preload 挿入

## Luna Core

- webcomponents SSR を試す
- client trigger を astro と互換にする (`luna:trigger` → `luna:client-trigger`)
  - https://r4ai.dev/posts/astro_hydration/
- data 属性を修正する (`luna:*` と `sol:*` にする)
- src/platform/dom/portal - モーダル等の実装に必須
- vite hot reload plugin
- localStorage 保存を独自シリアライズに変更する

## DX・ナビゲーション

- BF Cache 最適化
- MPA Mode (ViewTransition)
