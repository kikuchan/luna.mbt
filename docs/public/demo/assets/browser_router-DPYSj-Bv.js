import"./modulepreload-polyfill-BxR_cmXS.js";var e={$tag:0};function t(e){this._0=e}t.prototype.$tag=1;function n(e){this._0=e}n.prototype.$tag=0;function r(e){this._0=e}r.prototype.$tag=1;function i(e){this._0=e}i.prototype.$tag=2;function a(e){this._0=e}a.prototype.$tag=0;function o(e){this._0=e}o.prototype.$tag=1;function s(e){this._0=e}s.prototype.$tag=2;function c(e){this._0=e}c.prototype.$tag=3;var l=class extends Error{};function u(){throw new l}function d(e,t){if(t<0||t>=e.length)throw Error(`Index out of bounds`)}function f(e,t){let n=Array(e);return n.fill(t),n}function p(e){this._0=e}p.prototype.$tag=0;function m(e){this._0=e}m.prototype.$tag=1;var ee={$tag:1},te={$tag:0},ne=(e,t)=>e.toString(t),h=(e,t)=>{e.push(t)},re={$tag:0};function ie(e){this._0=e}ie.prototype.$tag=1;function ae(e){this._0=e}ae.prototype.$tag=2;function oe(e){this._0=e}oe.prototype.$tag=3;function se(e){this._0=e}se.prototype.$tag=4;var ce=e=>e.slice(0),le=(e,t)=>{e.length=t},ue=e=>e.pop(),de=(e,t)=>e[t],g=(e,t,n)=>e[t](...n),fe=e=>e==null,pe=()=>({}),_=(e,t,n)=>{e[t]=n},me={$tag:0};function he(e){this._0=e}he.prototype.$tag=1;var ge=()=>globalThis,v=()=>document,_e=(e,t)=>e.createElement(t),ve=(e,t)=>e.createTextNode(t),ye={$tag:0};function be(e){this._0=e}be.prototype.$tag=1;function xe(e){this._0=e}xe.prototype.$tag=0;function Se(e){this._0=e}Se.prototype.$tag=1;function Ce(e){this._0=e}Ce.prototype.$tag=2;var we=(e,t,n)=>e.addEventListener(t,n),y=(e,t)=>(e.click=t,e),Te=e=>Object.entries(e).map(([e,t])=>({_0:e,_1:{$tag:2,_0:t}})),Ee=()=>window.location.pathname,De=()=>window.location.search,Oe=e=>window.history.pushState(null,``,e),ke=e=>window.addEventListener(`popstate`,()=>e());function b(e,t,n,r){this._0=e,this._1=t,this._2=n,this._3=r}b.prototype.$tag=0;function Ae(e,t,n){this._0=e,this._1=t,this._2=n}Ae.prototype.$tag=1;function je(e,t){this._0=e,this._1=t}je.prototype.$tag=2;function Me(e,t){this._0=e,this._1=t}Me.prototype.$tag=3;var x={$tag:0};function S(e){this._0=e}S.prototype.$tag=1;var C={$tag:0};function w(e){this._0=e}w.prototype.$tag=1;var T={$tag:0};function Ne(e){this._0=e}Ne.prototype.$tag=1;var Pe={method_0:Xt,method_1:Qt,method_2:dn,method_3:Rt},Fe=`:`,Ie=`:`,Le=`-`,Re=`:`,ze=`:`,Be=`/`,Ve=`/`,He=0,Ue=0,We=`:`,Ge={val:0},E={current_subscriber:void 0,current_owner:void 0,current_cleanups:e,batch_depth:0,pending_effects:[],pending_ids:[]},Ke={_0:`disabled`,_1:new n(`true`)},qe=`/demo/browser_router`,Je=`background: #333; padding: 10px;`,Ye=`color: white; margin-right: 20px;`,Xe=`color: white; margin-right: 20px;`,Ze=`color: white; margin-right: 20px;`,Qe=`color: white; margin-right: 20px;`,$e=`counter`,et={_0:`data-testid`,_1:new a(`counter`)},tt={_0:`data-testid`,_1:new a(`count-display`)},nt=`counter-buttons`,rt={_0:`data-testid`,_1:new a(`decrement-btn`)},it={_0:`data-testid`,_1:new a(`increment-btn`)},at={_0:`data-testid`,_1:new a(`reset-btn`)},ot=`page home`,st={_0:`data-page`,_1:new a(`home`)},ct={_0:`data-testid`,_1:new a(`current-path`)},lt=`page about`,ut={_0:`data-page`,_1:new a(`about`)},dt=`users-layout`,ft=`border: 2px solid #007bff; padding: 15px; margin: 10px 0;`,pt=`background: #007bff; color: white; padding: 10px; margin: -15px -15px 15px -15px;`,mt=`margin: 0;`,ht=`margin: 5px 0 0 0; font-size: 0.9em;`,gt=`margin-bottom: 10px;`,_t=`margin-right: 10px;`,vt=`margin-right: 10px;`,yt=`margin-right: 10px;`,bt=`users-list`,xt=`user-detail`,St=`color: #666; font-style: italic;`,Ct=`settings-index`,wt=`settings-profile`,Tt=`not-found`,Et=`app`,Dt=`font-family: system-ui, sans-serif; max-width: 800px; margin: 0 auto;`,Ot=`padding: 20px;`;function kt(e){return u()}function At(e){return u()}function jt(e){u()}function Mt(e){return u()}function Nt(e,t){return e===0?t===0:t===1}function Pt(e,t){return kt(`${e}\n  at ${j(t)}\n`)}function Ft(e,t){return At(`${e}\n  at ${j(t)}\n`)}function It(e,t){jt(`${e}\n  at ${j(t)}\n`)}function Lt(e,t){return Mt(`${e}\n  at ${j(t)}\n`)}function D(e){return{val:``}}function Rt(e,t){let n=e;n.val=`${n.val}${String.fromCodePoint(t)}`}function zt(e,t){return(((Math.imul(e-55296|0,1024)|0)+t|0)-56320|0)+65536|0}function Bt(e,t){return!Nt(e,t)}function O(e,t){let n=e.length;return t>=0&&t<n?(d(e,t),e[t]):u()}function Vt(e,t){let n=e.length;return t>=0&&t<n?(d(e,t),e[t]):u()}function Ht(e,t){let n=e.length;return t>=0&&t<n?(d(e,t),e[t]):u()}function Ut(e,t){let n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){let i=f(256,r),a=r-1|0,o=0;for(;;){let e=o;if(e<a){let n=t.str,a=t.start+e|0,s=n.charCodeAt(a)&255;d(i,s),i[s]=(r-1|0)-e|0,o=e+1|0;continue}else break}let s=0;for(;;){let a=s;if(a<=(n-r|0)){let n=r-1|0,o=0;for(;;){let r=o;if(r<=n){let n=a+r|0,i=e.str,s=e.start+n|0,c=i.charCodeAt(s),l=t.str,u=t.start+r|0;if(c!==l.charCodeAt(u))break;o=r+1|0;continue}else return a}let c=(a+r|0)-1|0,l=e.str,u=e.start+c|0,f=l.charCodeAt(u)&255;d(i,f),s=a+i[f]|0;continue}else break}return}else return;else return He}function Wt(e,t){let n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){let i=t.str,a=t.start+0|0,o=i.charCodeAt(a),s=n-r|0,c=0;for(;c<=s;){for(;;){let t;if(c<=s){let n=c,r=e.str,i=e.start+n|0;t=r.charCodeAt(i)!==o}else t=!1;if(t){c=c+1|0;continue}else break}if(c<=s){let n=1;for(;;){let i=n;if(i<r){let r=c+i|0,a=e.str,o=e.start+r|0,s=a.charCodeAt(o),l=t.str,u=t.start+i|0;if(s!==l.charCodeAt(u))break;n=i+1|0;continue}else return c}c=c+1|0}}return}else return;else return Ue}function k(e,t){return(t.end-t.start|0)<=4?Wt(e,t):Ut(e,t)}function Gt(e,t){let n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){let i=f(256,r),a=r-1|0;for(;;){let e=a;if(e>0){let n=t.str,r=t.start+e|0,o=n.charCodeAt(r)&255;d(i,o),i[o]=e,a=e-1|0;continue}else break}let o=n-r|0;for(;;){let n=o;if(n>=0){let a=0;for(;;){let i=a;if(i<r){let r=n+i|0,o=e.str,s=e.start+r|0,c=o.charCodeAt(s),l=t.str,u=t.start+i|0;if(c!==l.charCodeAt(u))break;a=i+1|0;continue}else return n}let s=e.str,c=e.start+n|0,l=s.charCodeAt(c)&255;d(i,l),o=n-i[l]|0;continue}else break}return}else return;else return n}function Kt(e,t){let n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){let i=t.str,a=t.start+0|0,o=i.charCodeAt(a),s=n-r|0;for(;s>=0;){for(;;){let t;if(s>=0){let n=s,r=e.str,i=e.start+n|0;t=r.charCodeAt(i)!==o}else t=!1;if(t){s=s-1|0;continue}else break}if(s>=0){let n=1;for(;;){let i=n;if(i<r){let r=s+i|0,a=e.str,o=e.start+r|0,c=a.charCodeAt(o),l=t.str,u=t.start+i|0;if(c!==l.charCodeAt(u))break;n=i+1|0;continue}else return s}s=s-1|0}}return}else return;else return n}function qt(e,t){return(t.end-t.start|0)<=4?Kt(e,t):Gt(e,t)}function A(e,t,n){let r;return r=n===void 0?e.end-e.start|0:n,t>=0&&t<=r&&r<=(e.end-e.start|0)?{str:e.str,start:e.start+t|0,end:e.start+r|0}:Ft(`Invalid index for View`,`@moonbitlang/core/builtin:stringview.mbt:111:5-111:36`)}function Jt(e){let t=k(e,{str:Fe,start:0,end:1});if(t!==void 0){let n=t;return n>0&&(n+1|0)<(e.end-e.start|0)?{_0:A(e,0,n),_1:A(e,n+1|0,void 0)}:void 0}}function Yt(e){_L:if(sn(e,1,0,e.length))if(e.charCodeAt(0)===64){let t=un(e,1,0,e.length),n;n=t===void 0?e.length:t;let r={str:e,start:n,end:e.length},i=k(r,{str:Ie,start:0,end:1});if(i===void 0)return u();{let e=i,t=A(r,0,e),n=qt(r,{str:Le,start:0,end:1});if(n===void 0)return u();{let i=n;if((i+1|0)<(r.end-r.start|0)){let n=Jt(A(r,i+1|0,void 0));if(n===void 0)return u();{let a=n,o=a._0,s=a._1,c=A(r,0,i);_L$2:{let n=qt(c,{str:Re,start:0,end:1});if(n===void 0)break _L$2;{let r=qt(A(c,0,n),{str:ze,start:0,end:1});if(r===void 0)break _L$2;{let n=r;if((n+1|0)<(c.end-c.start|0)){let r=Jt(A(c,n+1|0,void 0));if(r===void 0)return u();{let i=r,a=i._0,l=i._1;return n>(e+1|0)?{pkg:t,filename:A(c,e+1|0,n),start_line:a,start_column:l,end_line:o,end_column:s}:u()}}else return u()}}}return u()}}else return u()}}}else break _L;else break _L;return u()}function Xt(e,t){let n=e;n.val=`${n.val}${t}`}function Zt(e,t,n){let r=e.length,i;if(n===void 0)i=r;else{let e=n;i=e<0?r+e|0:e}let a=t<0?r+t|0:t;if(a>=0&&a<=i&&i<=r){let t;if(a<r){let n=e.charCodeAt(a);t=56320<=n&&n<=57343}else t=!1;if(t)return new p(te);let n;if(i<r){let t=e.charCodeAt(i);n=56320<=t&&t<=57343}else n=!1;return n?new p(te):new m({str:e,start:a,end:i})}else return new p(ee)}function Qt(e,t,n,r){let i;_L:{_L$2:{let e=Zt(t,n,n+r|0);if(e.$tag===1)i=e._0;else{e._0;break _L$2}break _L}i=u()}dn(e,i)}function $t(e){let t=D(0),n={self:t,method_table:Pe};return e?n.method_table.method_0(n.self,`true`):n.method_table.method_0(n.self,`false`),t.val}function en(e){let t=D(0);return zr(e,{self:t,method_table:Pe}),t.val}function j(e){let t=D(0);return kn(e,{self:t,method_table:Pe}),t.val}function M(e,t){return ne(e,t)}function tn(e){return e.str.substring(e.start,e.end)}function nn(e){return e()}function rn(e){return e()}function an(e){return t=>{for(;;){let n=nn(e);if(n===void 0)return 1;if(t(n)!==1)return 0}}}function on(e){return t=>{for(;;){let n=rn(e);if(n===-1)return 1;if(t(n)!==1)return 0}}}function N(e){let t=D(Math.imul(e.end-e.start|0,4)|0),n=e.end-e.start|0,r=0;for(;;){let i=r;if(i<n){let n=e.buf[e.start+i|0];Rt(t,n),r=i+1|0;continue}else break}return t.val}function sn(e,t,n,r){let i;i=r===void 0?e.length:r;let a=n,o=0;for(;;){let n=a,r=o;if(n<i&&r<t){let t=e.charCodeAt(n);if(55296<=t&&t<=56319&&(n+1|0)<i){let t=n+1|0,i=e.charCodeAt(t);if(56320<=i&&i<=57343){a=n+2|0,o=r+1|0;continue}else It(`invalid surrogate pair`,`@moonbitlang/core/builtin:string.mbt:491:9-491:40`)}a=n+1|0,o=r+1|0;continue}else return r>=t}}function cn(e,t,n,r){let i=0,a=r;for(;(a-1|0)>=n&&i<t;){let t=a-1|0,n=e.charCodeAt(t);a=56320<=n&&n<=57343?a-2|0:a-1|0,i=i+1|0}return i<t||a<n?void 0:a}function ln(e,t,n,r){if(n>=0&&n<=r){let i=n,a=0;for(;i<r&&a<t;){let t=i,n=e.charCodeAt(t);i=55296<=n&&n<=56319?i+2|0:i+1|0,a=a+1|0}return a<t||i>=r?void 0:i}else return Lt(`Invalid start index`,`@moonbitlang/core/builtin:string.mbt:366:5-366:33`)}function un(e,t,n,r){let i;return i=r===void 0?e.length:r,t>=0?ln(e,t,n,i):cn(e,-t|0,n,i)}function dn(e,t){let n=e;n.val=`${n.val}${tn(t)}`}function fn(e,t){let n=k(e,t);return n===void 0?!1:n===0}function pn(e,t){return fn({str:e,start:0,end:e.length},t)}function mn(e){return[]}function P(e,t){h(e,t)}function F(e,t){h(e,t)}function hn(e,t){h(e,t)}function I(e,t){h(e,t)}function gn(e,t){h(e,t)}function _n(e,t){h(e,t)}function L(e,t){h(e,t)}function vn(e,t){h(e,t)}function yn(e){let t=e.length,n={val:0};return()=>{if(n.val<t){let r=n.val,i=e.charCodeAt(r);if(55296<=i&&i<=56319&&(n.val+1|0)<t){let t=n.val+1|0,r=e.charCodeAt(t);if(56320<=r&&r<=57343){let e=zt(i,r);return n.val=n.val+2|0,e}}return n.val=n.val+1|0,i}else return-1}}function bn(e){return on(yn(e))}function xn(e,t){return e(t)}function Sn(e){return String.fromCodePoint(e)}function Cn(e){let t=bn(e),n={val:mn(e.length)},r={val:re};t(e=>{let t=n.val;return L(t,e),n.val=t,1});let i=r.val;switch(i.$tag){case 0:break;case 1:i._0;break;case 2:return i._0;case 3:u();break;default:u()}return n.val}function wn(e){let t={val:0};return()=>{if(t.val<(e.end-e.start|0)){let n=e.buf[e.start+t.val|0];return t.val=t.val+1|0,n}else return}}function Tn(e){return wn({buf:e,start:0,end:e.length})}function En(e){return an(Tn(e))}function Dn(e,t){return Bt(xn(e,e=>t(e)?0:1),1)}function On(e,t){let n=e.pkg,r=k(n,{str:Be,start:0,end:1}),i;if(r===void 0)i={_0:n,_1:void 0};else{let e=r,t=k(A(n,e+1|0,void 0),{str:Ve,start:0,end:1});if(t===void 0)i={_0:n,_1:void 0};else{let r=t,a=(e+1|0)+r|0;i={_0:A(n,0,a),_1:A(n,a+1|0,void 0)}}}let a=i._0,o=i._1;if(o!==void 0){let e=o;t.method_table.method_2(t.self,e),t.method_table.method_3(t.self,47)}t.method_table.method_2(t.self,e.filename),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.start_line),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.start_column),t.method_table.method_3(t.self,45),t.method_table.method_2(t.self,e.end_line),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.end_column),t.method_table.method_3(t.self,64),t.method_table.method_2(t.self,a)}function kn(e,t){On(Yt(e),t)}function An(e,t,n){let r=e.length,i;if(n===void 0)i=r;else{let e=n;i=e<0?r+e|0:e}let a=t<0?r+t|0:t;return a>=0&&a<=i&&i<=r?{buf:e,start:a,end:i}:Pt(`View index out of bounds`,`@moonbitlang/core/builtin:arrayview.mbt:200:5-200:38`)}function jn(e,t){le(e,t)}function Mn(e,t){le(e,t)}function Nn(e){return ue(e)}function Pn(e){return e.length===0?-1:Nn(e)}function Fn(e){return ce(e)}function In(e){jn(e,0)}function Ln(e){Mn(e,0)}function Rn(e){return fe(e)?me:new he(e)}function zn(){return ge()}function Bn(e,t){return g(e,`appendChild`,[t])}function Vn(e,t){_(e,`textContent`,t)}function Hn(e){g(e,`preventDefault`,[])}function Un(e,t){_(e,`className`,t)}function Wn(e,t,n){g(e,`setAttribute`,[t,n])}function Gn(e,t){g(e,`removeAttribute`,[t])}function Kn(e,t){return Rn(g(e,`getElementById`,[t]))}function R(e,t){let n=[],r=Cn(e),i=[],a=r.length,o=0;for(;;){let e=o;if(e<a){let a=r[e];a===t?(I(n,N({buf:i,start:0,end:i.length})),Ln(i)):L(i,a),o=e+1|0;continue}else break}return I(n,N({buf:i,start:0,end:i.length})),n}function qn(e,t){let n=e.params,r=n.length,i=0;for(;;){let e=i;if(e<r){let r=n[e];if(r._0===t)return r._1;i=e+1|0;continue}else break}}function Jn(e){if(e!==``){let t=[],n=R(e,38),r=n.length,i=0;for(;;){let e=i;if(e<r){let r=n[e],a=R(r,61);if(a.length===2)gn(t,{_0:O(a,0),_1:O(a,1)});else{let e;e=a.length===1?O(a,0)!==``:!1,e&&gn(t,{_0:O(a,0),_1:``})}i=e+1|0;continue}else break}return t}else return[]}function Yn(e){let t=Cn(e),n=-1,r=t.length,i=0;for(;;){let e=i;if(e<r){if(t[e]===63){n=e;break}i=e+1|0;continue}else break}return n===-1?{_0:e,_1:[]}:{_0:N(An(t,0,n)),_1:Jn(N(An(t,n+1|0,void 0)))}}function Xn(e){let t=R(e,47),n=[],r=t.length,i=0;for(;;){let e=i;if(e<r){let r=t[e];r!==``&&I(n,r),i=e+1|0;continue}else break}return n}function Zn(e,t){let n=Sn(t);return pn(e,{str:n,start:0,end:n.length})}function Qn(e,t){let n=Xn(t.pattern),r=Xn(e);if(n.length!==r.length)return ye;let i=[],a=0,o=n.length,s=0;for(;;){let e=s;if(e<o){let o=n[e],c=O(r,e);if(Zn(o,58))if(a<t.param_names.length)gn(i,{_0:O(t.param_names,a),_1:c}),a=a+1|0;else return ye;else if(o!==c)return ye;s=e+1|0;continue}else break}return new be(i)}function $n(e,t){let n=Yn(e),r=n._0,i=n._1,a=t.length,o=0;for(;;){let e=o;if(e<a){let n=t[e],a=Qn(r,n);if(a.$tag===1)return{route:n,params:a._0,query:i,path:r};o=e+1|0;continue}else break}}function z(e){if(e===``||e===`/`)return`/`;let t=Cn(e),n=[],r=!1,i=t.length,a=0;for(;;){let e=a;if(e<i){let i=t[e];i===47?(r||L(n,i),r=!0):(L(n,i),r=!1),a=e+1|0;continue}else break}let o=n.length;return o>1&&Ht(n,o-1|0)===47&&Pn(n),N({buf:n,start:0,end:n.length})}function er(e){let t=[],n=R(e,47),r=n.length,i=0;for(;;){let e=i;if(e<r){_L:{let r=n[e];if(pn(r,{str:We,start:0,end:1})&&r.length>1){let e;_L$2:{_L$3:{let t=Zt(r,1,void 0),n;if(t.$tag===1)n=t._0;else{t._0;break _L$3}e=tn(n);break _L$2}break _L}I(t,e)}break _L}i=e+1|0;continue}else break}return t}function tr(e,t,n,r){let i=e.length,a=0;for(;;){let o=a;if(o<i){let i=e[o];switch(i.$tag){case 0:{let e=i,a=e._0,o=e._1,s=e._2,c=e._3,l=z(`${t}${a}`);hn(r,{pattern:l,param_names:er(l),component:o,layouts:Fn(n),kind:0,title:s,meta:c});break}case 2:{let e=i,n=e._0,a=e._1,o=z(`${t}${n}`);hn(r,{pattern:o,param_names:er(o),component:a,layouts:[],kind:1,title:``,meta:[]});break}case 3:{let e=i,n=e._0,a=e._1,o=z(`${t}${n}`);hn(r,{pattern:o,param_names:er(o),component:a,layouts:[],kind:2,title:``,meta:[]});break}default:{let e=i,a=e._0,o=e._1,s=e._2,c=z(`${t}${a}`),l=Fn(n);I(l,s),tr(o,c,l,r)}}a=o+1|0;continue}else return}}function nr(e,t){let n=[];return tr(e,t,[],n),n}function rr(){let e=Ge.val;return Ge.val=e+1|0,e}function ir(e){let t=E.current_owner;t!==void 0&&_n(t.disposers,e)}function ar(e){let t=e.length-1|0;for(;;){let n=t;if(n>=0){Vt(e,n)(),t=n-1|0;continue}else break}In(e)}function or(e){let t=E.current_cleanups;return E.current_cleanups=e,t}function sr(e,n){let r=or(new t(e));n(),E.current_cleanups=r}function cr(e,t){let n=E.current_subscriber;E.current_subscriber=e,t(),E.current_subscriber=n}function lr(e){let t={active:!0,cleanups:[]},n=rr(),r={val:void 0},i=()=>{if(!t.active)return;ar(t.cleanups);let n=r.val;n!==void 0&&cr(n,()=>{sr(t.cleanups,e)})};r.val={id:n,run:i},i();let a=()=>{t.active=!1,ar(t.cleanups)};return ir(a),a}function ur(e){let t=E.current_subscriber;if(t!==void 0){let n=t;Dn(En(e.subscribers),e=>e.id===n.id)||P(e.subscribers,n)}return e.value}function dr(e){let t=E.current_subscriber;if(t!==void 0){let n=t;Dn(En(e.subscribers),e=>e.id===n.id)||P(e.subscribers,n)}return e.value}function B(e){let t=E.current_subscriber;if(t!==void 0){let n=t;Dn(En(e.subscribers),e=>e.id===n.id)||P(e.subscribers,n)}return e.value}function fr(e){return{value:e,subscribers:[]}}function pr(e){return{value:e,subscribers:[]}}function mr(e){return{value:e,subscribers:[]}}function hr(e){return fr(e)}function gr(e){return pr(e)}function _r(e){return mr(e)}function vr(e){let t=E.pending_ids,n=t.length,r=0;for(;;){let i=r;if(i<n){if(t[i]===e)return!0;r=i+1|0;continue}else break}return!1}function yr(e){if(E.batch_depth>0){if(vr(e.id))return;vn(E.pending_ids,e.id),P(E.pending_effects,e);return}else{let t=e.run;t();return}}function br(e){let t=e.subscribers,n=t.length,r=0;for(;;){let e=r;if(e<n){let n=t[e];yr(n),r=e+1|0;continue}else return}}function xr(e){let t=e.subscribers,n=t.length,r=0;for(;;){let e=r;if(e<n){let n=t[e];yr(n),r=e+1|0;continue}else return}}function Sr(e){let t=e.subscribers,n=t.length,r=0;for(;;){let e=r;if(e<n){let n=t[e];yr(n),r=e+1|0;continue}else return}}function Cr(e,t){e.value=t,br(e)}function wr(e,t){e.value=t,xr(e)}function Tr(e,t){e.value=t,Sr(e)}function Er(e,t){e.value=t(e.value),Sr(e)}function Dr(e){let t=E.current_subscriber;E.current_subscriber=void 0;let n=e();return E.current_subscriber=t,n}function Or(e){let t=E.current_subscriber;E.current_subscriber=void 0;let n=e();return E.current_subscriber=t,n}function kr(e){let t=ve(v(),e());return lr(()=>{Vn(t,e())}),new Se(t)}function Ar(e,t,n){if(t===`className`){Un(e,n);return}else if(t===`value`){_(e,`value`,n);return}else if(t===`checked`){_(e,`checked`,n===`true`);return}else if(t===`disabled`)if(n===`true`){Wn(e,`disabled`,``);return}else{Gn(e,`disabled`);return}else{Wn(e,t,n);return}}function jr(e,t){Wn(e,`style`,t)}function Mr(e,t,n){switch(n.$tag){case 0:{let r=n._0;if(t===`style`){jr(e,r);return}else{Ar(e,t,r);return}}case 1:{let r=n._0;lr(()=>{let n=r();if(t===`style`){jr(e,n);return}else{Ar(e,t,n);return}});return}default:{let r=n._0;if(t===`__ref`){r(e);return}else{we(e,t,r);return}}}}function Nr(e){return{inner:e}}function Pr(e){switch(e.$tag){case 0:return e._0.inner;case 1:return e._0;default:return e._0}}function V(e,t,n){let r=_e(v(),e),i=t.length,a=0;for(;;){let e=a;if(e<i){let n=t[e],i=n._0,o=n._1;Mr(r,i,o),a=e+1|0;continue}else break}let o=n.length,s=0;for(;;){let e=s;if(e<o){let t=n[e];Bn(r,Pr(t)),s=e+1|0;continue}else break}return new xe(Nr(r))}function Fr(e,t){Bn(e.inner,Pr(t))}function Ir(e){Vn(e.inner,``)}function Lr(e){return new Se(ve(v(),e))}function Rr(e){return g(e,`toString`,[])}function zr(e,t){switch(e.$tag){case 0:{let n=e._0;t.method_table.method_0(t.self,n);return}case 1:{let n=e._0;t.method_table.method_0(t.self,Rr(n));return}case 2:{let n=e._0;t.method_table.method_0(t.self,M(n,10));return}default:{let n=e._0;t.method_table.method_0(t.self,$t(n));return}}}function Br(e){return new n(en(e))}function H(){return pe()}function U(e,t,r,a,o,s,c){let l=[];if(e===void 0||F(l,{_0:`id`,_1:new n(e)}),t===void 0||F(l,{_0:`className`,_1:new n(t)}),r===void 0||F(l,{_0:`style`,_1:new n(r)}),a.$tag===1){let e=a._0,t=Te(e),n=t.length,r=0;for(;;){let e=r;if(e<n){let n=t[e];F(l,n),r=e+1|0;continue}else break}}if(o!==void 0){let e=o;F(l,{_0:`__ref`,_1:new i(t=>{e(t)})})}if(s.$tag===1){let e=s._0,t=e.length,n=0;for(;;){let r=n;if(r<t){let t=e[r];F(l,{_0:t._0,_1:Br(t._1)}),n=r+1|0;continue}else break}}if(c.$tag===1){let e=c._0,t=e.length,n=0;for(;;){let r=n;if(r<t){let t=e[r];F(l,t),n=r+1|0;continue}else break}}return l}function Vr(e,t,n,i,a,o,s,c,l,u){let d=U(e,t,n,o,s,c,l);return i===void 0||F(d,{_0:`className`,_1:new r(i)}),a===void 0||F(d,{_0:`style`,_1:new r(a)}),V(`nav`,d,u)}function W(e,t,n,i,a,o,s,c,l,u){let d=U(e,t,n,o,s,c,l);return i===void 0||F(d,{_0:`className`,_1:new r(i)}),a===void 0||F(d,{_0:`style`,_1:new r(a)}),V(`div`,d,u)}function G(e,t,n,i,a,o,s,c,l,u){let d=U(e,t,n,o,s,c,l);return i===void 0||F(d,{_0:`className`,_1:new r(i)}),a===void 0||F(d,{_0:`style`,_1:new r(a)}),V(`span`,d,u)}function K(e,t,n,i,a,o,s,c,l,u){let d=U(e,t,n,o,s,c,l);return i===void 0||F(d,{_0:`className`,_1:new r(i)}),a===void 0||F(d,{_0:`style`,_1:new r(a)}),V(`p`,d,u)}function Hr(e,t,i,a,o,s,c,l,u,d,f,p){let m=U(i,a,o,l,u,d,f);return e===void 0||F(m,{_0:`href`,_1:new n(e)}),t===void 0||F(m,{_0:`target`,_1:new n(t)}),s===void 0||F(m,{_0:`className`,_1:new r(s)}),c===void 0||F(m,{_0:`style`,_1:new r(c)}),V(`a`,m,p)}function q(e,t,n,i,a,o,s,c,l,u){let d=U(e,t,n,o,s,c,l);return i===void 0||F(d,{_0:`className`,_1:new r(i)}),a===void 0||F(d,{_0:`style`,_1:new r(a)}),V(`h1`,d,u)}function Ur(e,t,n,i,a,o,s,c,l,u){let d=U(e,t,n,o,s,c,l);return i===void 0||F(d,{_0:`className`,_1:new r(i)}),a===void 0||F(d,{_0:`style`,_1:new r(a)}),V(`h2`,d,u)}function Wr(e,t,n,i,a,o,s,c,l,u){let d=U(e,t,n,o,s,c,l);return i===void 0||F(d,{_0:`className`,_1:new r(i)}),a===void 0||F(d,{_0:`style`,_1:new r(a)}),V(`h3`,d,u)}function Gr(e,t,n,i,a,o,s,c,l,u){let d=U(e,t,n,o,s,c,l);return i===void 0||F(d,{_0:`className`,_1:new r(i)}),a===void 0||F(d,{_0:`style`,_1:new r(a)}),V(`ul`,d,u)}function J(e,t,n,i,a,o,s,c,l,u){let d=U(e,t,n,o,s,c,l);return i===void 0||F(d,{_0:`className`,_1:new r(i)}),a===void 0||F(d,{_0:`style`,_1:new r(a)}),V(`li`,d,u)}function Y(e,t,n,i,a,o,s,c,l,u,d,f){let p=U(t,n,i,c,l,u,d);if(e===-1||e===!0&&F(p,Ke),a===void 0||F(p,{_0:`className`,_1:new r(a)}),o===void 0||F(p,{_0:`style`,_1:new r(o)}),s!==void 0){let e=s;F(p,{_0:`disabled`,_1:new r(()=>$t(e()))})}return V(`button`,p,f)}function Kr(e,t,n,i,a,o,s,c,l){let u=U(e,t,n,o,s,c,l);return i===void 0||F(u,{_0:`className`,_1:new r(i)}),a===void 0||F(u,{_0:`style`,_1:new r(a)}),V(`hr`,u,[])}function X(e){return Lr(e)}function qr(e){return kr(e)}function Jr(){let e=Ee(),t=De();return t===``?e:`${e}${t}`}function Yr(e){let t=Jr();Cr(e.current_path,t),wr(e.current_match,$n(t,e.routes))}function Xr(e,t){let n=nr(e,t),r=Jr(),i=$n(r,n),a={routes:n,base:t,current_path:hr(r),current_match:gr(i)};return ke(()=>{Yr(a)}),a}function Zr(e,t){Cr(e.current_path,t),wr(e.current_match,$n(t,e.routes))}function Z(e,t){Oe(t),Zr(e,t)}function Qr(e){return ur(e.current_path)}function Q(e){g(de(zn(),`console`),`log`,[e])}function $r(){return[new b(``,`home`,`Home`,[]),new b(`/about`,`about`,`About`,[]),new Ae(`/users`,[new b(``,`users_list`,`Users`,[]),new b(`/:id`,`user_detail`,`User Detail`,[])],`users_layout`),new Ae(`/settings`,[new b(``,`settings_index`,`Settings`,[]),new b(`/profile`,`settings_profile`,`Profile Settings`,[])],`settings_layout`)]}function $(e,t,n){return Hr(t,void 0,void 0,void 0,void 0,void 0,void 0,new S(y(H(),n=>{Hn(n),Z(e,t)})),void 0,C,T,[X(n)])}function ei(e){let t=e.base;return Vr(void 0,void 0,Je,void 0,void 0,x,void 0,C,T,[G(void 0,void 0,Ye,void 0,void 0,x,void 0,C,T,[$(e,t,`Home`)]),G(void 0,void 0,Xe,void 0,void 0,x,void 0,C,T,[$(e,`${t}/about`,`About`)]),G(void 0,void 0,Ze,void 0,void 0,x,void 0,C,T,[$(e,`${t}/users`,`Users`)]),G(void 0,void 0,Qe,void 0,void 0,x,void 0,C,T,[$(e,`${t}/settings`,`Settings`)])])}function ti(){let e=_r(0);return Q(`Creating counter component, initial count: ${M(B(e),10)}`),W(void 0,$e,void 0,void 0,void 0,x,void 0,new w([et]),T,[Wr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Interactive Counter`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,new w([tt]),T,[qr(()=>`Count: ${M(B(e),10)}`)]),W(void 0,nt,void 0,void 0,void 0,x,void 0,C,T,[Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new S(y(H(),t=>{Q(`Decrement clicked, current: ${M(B(e),10)}`),Er(e,e=>e-1|0),Q(`After decrement: ${M(B(e),10)}`)})),void 0,new w([rt]),T,[X(`-`)]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new S(y(H(),t=>{Q(`Increment clicked, current: ${M(B(e),10)}`),Er(e,e=>e+1|0),Q(`After increment: ${M(B(e),10)}`)})),void 0,new w([it]),T,[X(`+`)]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new S(y(H(),t=>{Q(`Reset clicked`),Tr(e,0)})),void 0,new w([at]),T,[X(`Reset`)])])])}function ni(e){return W(void 0,ot,void 0,void 0,void 0,x,void 0,new w([st]),T,[q(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Welcome to Browser App`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`This is an example of the new Routes-based routing system.`)]),ti(),Kr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T),Ur(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Features`)]),Gr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Routes enum for declarative route definitions`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Component ID-based resolution`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Layout support for nested routes`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Dynamic parameters with :id syntax`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`URLPattern API for matching`)])]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,new w([ct]),T,[X(`Current path: `),qr(()=>Qr(e))])])}function ri(e){return W(void 0,lt,void 0,void 0,void 0,x,void 0,new w([ut]),T,[q(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`About`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`This app demonstrates the new routing architecture:`)]),Gr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`ServerComponent: async data fetching on server`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`ClientComponent (Island): Hydration with luna:url`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Layout: shared wrapper for nested routes`)])])])}function ii(e,t){let n=e.base;return W(void 0,dt,ft,void 0,void 0,x,void 0,C,T,[W(void 0,void 0,pt,void 0,void 0,x,void 0,C,T,[Ur(void 0,void 0,mt,void 0,void 0,x,void 0,C,T,[X(`Users Section`)]),K(void 0,void 0,ht,void 0,void 0,x,void 0,C,T,[X(`This is a layout wrapper for all /users/* routes`)])]),W(void 0,void 0,gt,void 0,void 0,x,void 0,C,T,[Y(-1,void 0,void 0,_t,void 0,void 0,void 0,new S(y(H(),t=>{Z(e,`${n}/users`)})),void 0,C,T,[X(`User List`)]),Y(-1,void 0,void 0,vt,void 0,void 0,void 0,new S(y(H(),t=>{Z(e,`${n}/users/1`)})),void 0,C,T,[X(`User 1`)]),Y(-1,void 0,void 0,yt,void 0,void 0,void 0,new S(y(H(),t=>{Z(e,`${n}/users/2`)})),void 0,C,T,[X(`User 2`)]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new S(y(H(),t=>{Z(e,`${n}/users/3`)})),void 0,C,T,[X(`User 3`)])]),t])}function ai(e){return W(void 0,bt,void 0,void 0,void 0,x,void 0,C,T,[Wr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`User List`)]),Gr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`User 1 - Alice`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`User 2 - Bob`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`User 3 - Charlie`)])])])}function oi(e,t){let n=qn(t,`id`),r;r=n===void 0?`unknown`:n;let i;switch(r){case`1`:i=`Alice`;break;case`2`:i=`Bob`;break;case`3`:i=`Charlie`;break;default:i=`Unknown User`}return W(void 0,xt,void 0,void 0,void 0,x,void 0,C,T,[Wr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`User Detail`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`User ID: ${r}`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Name: ${i}`)]),K(void 0,void 0,St,void 0,void 0,x,void 0,C,T,[X(`(In a real app, this data would be fetched from an API)`)])])}function si(e){let t=`${e.base}/settings/profile`;return W(void 0,Ct,void 0,void 0,void 0,x,void 0,C,T,[q(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Settings`)]),Gr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[Hr(t,void 0,void 0,void 0,void 0,void 0,void 0,new S(y(H(),n=>{Hn(n),Z(e,t)})),void 0,C,T,[X(`Profile Settings`)])])])])}function ci(e){let t=e.base;return W(void 0,wt,void 0,void 0,void 0,x,void 0,C,T,[q(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Profile Settings`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Edit your profile here.`)]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new S(y(H(),n=>{Z(e,`${t}/settings`)})),void 0,C,T,[X(`Back to Settings`)])])}function li(e){let t=e.base;return W(void 0,Tt,void 0,void 0,void 0,x,void 0,C,T,[q(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`404 - Not Found`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Page not found: `),qr(()=>Qr(e))]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new S(y(H(),n=>{Z(e,t)})),void 0,C,T,[X(`Go Home`)])])}function ui(e,t){let n=t.route.component,r=t.route.layouts;Q(`Resolving component: ${n}, layouts: ${M(r.length,10)}`);let i;switch(n){case`home`:i=ni(e);break;case`about`:i=ri(e);break;case`users_list`:i=ai(e);break;case`user_detail`:i=oi(e,t);break;case`settings_index`:i=si(e);break;case`settings_profile`:i=ci(e);break;default:i=li(e)}let a=i,o=r.length-1|0;for(;o>=0;){let t=O(r,o),n;n=t===`users_layout`?ii(e,a):a,a=n,o=o-1|0}return a}function di(e,t){lr(()=>{let n=dr(e.current_match),r=e.current_path.value;Q(`Route changed (effect triggered): ${r}`),Ir(t);let i=Dr(()=>{let t=ei(e),r;return r=n===void 0?li(e):ui(e,n),{_0:t,_1:r}}),a=i._0,o=i._1;Fr(t,Or(()=>W(void 0,Et,Dt,void 0,void 0,x,void 0,C,T,[a,W(void 0,void 0,Ot,void 0,void 0,x,void 0,C,T,[o])])))})}(()=>{Q(`Browser App Starting...`);let e=Kn(v(),`app`);if(e.$tag===1){let t=e._0,n=Xr($r(),qe),r=n.routes,i=r.length,a=0;for(;;){let e=a;if(e<i){let t=r[e];Q(`Compiled route: pattern=${t.pattern}, component=${t.component}`),a=e+1|0;continue}else break}Q(`Router created with path: ${Qr(n)}`),di(n,Nr(t)),Q(`App rendered!`);return}else{Q(`ERROR: #app container not found`);return}})();