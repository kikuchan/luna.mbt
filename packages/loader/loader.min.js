/*! luna loader v1 */
((e,t)=>{const n={},r=new Set,a=t=>e.querySelectorAll(t),d=async t=>{const a=t.getAttribute("ln:id");if(!a||r.has(a))return;r.add(a);const d=t.getAttribute("ln:url");if(!d)return;n[a]=await(async t=>{const n=t.getAttribute("ln:state");if(n){if("#"===n[0])return JSON.parse(e.getElementById(n.slice(1))?.textContent);try{return JSON.parse(n)}catch{}}})(t);const o=await import(d),i=t.getAttribute("ln:export");(i?o[i]:o.hydrate??o.default)?.(t,n[a],a)},o=n=>{const r=n.getAttribute("ln:trigger")??"load";"load"===r?"loading"===e.readyState?e.addEventListener("DOMContentLoaded",()=>d(n),{once:1}):d(n):"idle"===r?requestIdleCallback(()=>d(n)):"v"===r[0]?new IntersectionObserver((e,t)=>e.some(e=>e.isIntersecting&&(t.disconnect(),d(n))),{rootMargin:"50px"}).observe(n):"m"===r[0]&&((e=t.matchMedia(r.slice(6)),a=()=>e.matches&&(e.removeEventListener("change",a),d(n)))=>{e.matches?d(n):e.addEventListener("change",a)})()},i=()=>a("[ln\\:id]").forEach(o);a('script[type="ln/json"]').forEach(e=>e.id&&(n[e.id]=JSON.parse(e.textContent))),"loading"===e.readyState?e.addEventListener("DOMContentLoaded",i,{once:1}):i(),new MutationObserver(e=>e.flatMap(e=>[...e.addedNodes]).forEach(e=>1===e.nodeType&&e.hasAttribute("ln:id")&&o(e))).observe(e.body??e.documentElement,{childList:1,subtree:1}),t.__LN_STATE__=n,t.__LN_HYDRATE__=d,t.__LN_SCAN__=i})(document,window);